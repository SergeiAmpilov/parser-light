(()=>{"use strict";const e=new class{baseUrl;constructor(e){this.baseUrl=e}request(e,r,t){return fetch(this.baseUrl+r,{method:e,headers:{"Content-Type":"application/json"},body:JSON.stringify(t)}).then((e=>e.json())).then((e=>e))}showPreloader(e){e.innerHTML='\n    <div class="row">\n      <div class="valign-wrapper">\n        <div class="preloader-wrapper small active">\n          <div class="spinner-layer spinner-green-only">\n            <div class="circle-clipper left">\n              <div class="circle"></div>\n            </div><div class="gap-patch">\n              <div class="circle"></div>\n            </div><div class="circle-clipper right">\n              <div class="circle"></div>\n            </div>\n          </div>\n        </div>\n      </div>\n    </div>\n    '}ddRunTask(e){return this.request("POST","downdetector/run",{url:e})}runSeoparserTask(e){return this.request("POST","seoparser/run",{url:e})}parsePages(e,r){return this.request("POST","seoparser/parsepages",{url:e,taskid:Number(r)})}}("http://localhost:3000/"),r=r=>{r.preventDefault();const t=new FormData(r.target).get("url");e.showPreloader(r.target),e.ddRunTask(t),setTimeout((()=>location.reload()),1e3)},t=async r=>{r.preventDefault();const t=new FormData(r.target).get("url");e.showPreloader(r.target);const{id:s}=await e.runSeoparserTask(t);window.location.replace(`/seoparser/sitemaps/${s}`)};async function s(r){r.preventDefault();const t=r.target.dataset.url,s=r.target.dataset.taskid;console.log("run parse123"),await e.parsePages(t,s),window.location.replace(`/seoparser/renderpages?sitemap=${t}&taskid=${s}`)}document.addEventListener("DOMContentLoaded",(function(){document.querySelectorAll(".footer__year").forEach((e=>{e.innerHTML=(new Date).getFullYear()})),(()=>{const e=document.forms;e.downdetectorform&&e.downdetectorform.addEventListener("submit",r),e.seoparserform&&e.seoparserform.addEventListener("submit",t)})(),document.querySelectorAll(".button__parse-pages").forEach((e=>{e.addEventListener("click",s)}))}))})();